(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{2119:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/community/auth/suiswap-points-login-auth",function(){return c(529)}])},529:function(a,b,c){"use strict";c.r(b);var d=c(7568),e=c(1799),f=c(4051),g=c.n(f),h=c(5893),i=c(2245);c(2978);var j=c(196),k=c(7294),l=c(1838),m=c(7815),n=c(7318),o=c(9769),p={avatarUrl:"/images/misc/user-profile-image-test.png",name:"Unknown",point:0,details:[]},q={avatarUrl:"/images/misc/user-profile-image-test.png",name:"Loading",point:0,details:[]},r=function(){var a=(0,k.useRef)(null),b=(0,k.useState)("loading"),c=b[0],f=b[1],r=(0,k.useState)(!0),s=r[0],t=r[1],u=(0,k.useState)(null),v=u[0],w=u[1],x=(0,k.useState)(null),y=x[0],z=x[1],A=(0,k.useState)(p),B=A[0],C=A[1];(0,k.useEffect)(function(){var a=new URLSearchParams(window.location.hash.slice(1)),b=[a.get("access_token"),a.get("token_type")],c=b[0],d=b[1];w(c),z(d)},[]),(0,k.useEffect)(function(){var a;(a=(0,d.Z)(g().mark(function a(){return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t(!0),a.next=3,(0,o.delay)(2e3);case 3:t(!1);case 4:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()},[]),(0,k.useEffect)(function(){var a;if(null===v){f("unknown");return}f("loading"),(a=(0,d.Z)(g().mark(function a(){var b,c,d,e,h,i,k,l,m,n,o,p;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://discord.com/api/users/@me",{headers:{authorization:"".concat(y," ").concat(v)}});case 2:return b=a.sent,a.next=5,b.json();case 5:if(d=(c=a.sent).id,e=c.username,h=c.avatar,i=void 0!==d&& void 0!==e&& void 0!==h?"https://cdn.discordapp.com/avatars/".concat(d,"/").concat(h,".jpg"):void 0,k=0,l=[],!(void 0!==d)){a.next=29;break}return a.prev=13,a.next=16,j.ZP.get("https://vivi.one/discord-bot/suiswap-points",{params:{userId:d}});case 16:k=null!==(o=(n=(m=a.sent).data).point)&& void 0!==o?o:0,l=null!==(p=n.details)&& void 0!==p?p:[],a.next=27;break;case 24:return a.prev=24,a.t0=a.catch(13),a.abrupt("return");case 27:C({avatarUrl:null!=i?i:"/images/misc/user-profile-image-test.png",name:null!=e?e:"",point:k,details:l}),f("done");case 29:case"end":return a.stop()}},a,null,[[13,24]])})),function(){return a.apply(this,arguments)})()},[v,y]);var D=p;return"loading"===c?D=q:"done"===c&&(D=(0,e.Z)({},p,B)),(0,h.jsx)(m.K,{children:(0,h.jsxs)("div",{ref:a,style:{margin:"0px",width:"100%",height:"100%",position:"fixed",top:0,left:0,background:"#f9f9f9"},children:[(0,h.jsx)(l.A,{}),(0,h.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"0px"},children:(0,h.jsxs)("div",{className:"modal-background-content-frame",children:[(0,h.jsxs)("div",{className:"modal-background-frame-title-frame",style:{width:486},children:[(0,h.jsx)("span",{className:"modal-background-frame-title",children:"Suiswap Point"}),(0,h.jsx)("span",{className:"modal-background-frame-subtitle",children:"Your Suiswap Point is"})]}),"loading"===c||s?(0,h.jsx)("div",{children:(0,h.jsx)(i.Dots,{color:"black"})}):(0,h.jsx)("div",{style:{boxShadow:"-21px 24px 11px rgba(204, 201, 201, 0.25)",borderRadius:"40px",maxWidth:400},children:(0,h.jsx)(n.fQ,(0,e.Z)({},D))})]})})]})})};b.default=r}},function(a){a.O(0,[219,524,795,292,770,934,192,926,318,774,888,179],function(){var b;return a(a.s=2119)}),_N_E=a.O()}])